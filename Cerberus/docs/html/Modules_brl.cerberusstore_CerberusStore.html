<!doctype html>
<html lang="en-US">
<head>
	<meta charset="UTF-8" />
	<title>Cerberus X Documentation</title>
	<link rel="stylesheet" type="text/css" href="pagestyle.css" />
</head>
<body>
	<div class="page">
		<header>
			<h1>
				<a href="Home.html"><img src="data/cerberusx.png"/></a>Cerberus X Documentation
			</h1>

		</header>

		<nav class="main">
			<a href="Home.html">Home</a>
			<a href="API Reference.html">API Reference</a>
			<a href="Programming_Language reference.html">Language Reference</a>
			<a href="Modules.html">Modules</a>
			<a href="Indexes.html">Indexes</a>
		</nav>
		
		<nav class="location">
			<a href='Home.html'>Home</a>

			<a href='Modules.html'>Modules</a>

			<a href='Modules_brl.cerberusstore.html'>brl.cerberusstore</a>

			<span>CerberusStore</span>

		</nav>

		<main>


<h1>Class <small>CerberusStore</small></h1>


	<p>
		The CerberusStore and <a href="Modules_brl.cerberusstore_Product.html">Product</a> classes allow apps to perform 'in app purchases' (IAP) on the ios, android and winrt(windows8.1) targets.<a href="#description"> More...</a>
	</p>


<h2>Declarations</h2>
















	<table class="index">
		<tr><th>Methods</th><th></th></tr>
		
			<tr>
				<td><code><a href="#AddProducts(String[],Int)">AddProducts</a><small> : Void ( ids:String[], type:Int )</small></code></td>
				<td>Adds multiple new products to the store.</td>
			</tr>
		
			<tr>
				<td><code><a href="#BuyProductAsync(Product,IOnBuyProductComplete)">BuyProductAsync</a><small> : Void ( product:Product, onComplete:IOnBuyProductComplete )</small></code></td>
				<td>Starts an async operation to buy a product.</td>
			</tr>
		
			<tr>
				<td><code><a href="#GetOwnedProductsAsync(IOnGetOwnedProductsComplete)">GetOwnedProductsAsync</a><small> : Void ( onComplete:IOnGetOwnedProductsComplete )</small></code></td>
				<td>Starts an async operation to get an array of all non-consumable products owned by the user.</td>
			</tr>
		
			<tr>
				<td><code><a href="#GetProduct(String)">GetProduct</a><small> : Product ( id:String )</small></code></td>
				<td>Gets the product corresponding to <b>id</b>, the iTunes connect or GooglePlay product identifier.</td>
			</tr>
		
			<tr>
				<td><code><a href="#GetProducts()">GetProducts</a><small> : Product[] ()</small></code></td>
				<td>Gets all products.</td>
			</tr>
		
			<tr>
				<td><code><a href="#GetProducts(Int)">GetProducts</a><small> : Product[] ( type:Int )</small></code></td>
				<td>Gets all products of the given type.</td>
			</tr>
		
			<tr>
				<td><code><a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a><small> : Void ( onComplete:IOnOpenStoreComplete )</small></code></td>
				<td>Starts an async operation to open the store.</td>
			</tr>
		
	</table>












	<section>
		<a name="description"></a>
		<h2>Detailed Discussion</h2>
		<p>
The CerberusStore and <a href="Modules_brl.cerberusstore_Product.html">Product</a> classes allow apps to perform 'in app purchases' (IAP) on the ios, android and winrt(windows8.1) targets.
</p>
<p>
CerberusStore only currently supports consumable and non-consumables products. Subscriptions and downloadable content are not supported.
</p>
<p>
The general process for using CerberusStore in your apps is:
</p>
<ul>
<li>Create a new CerberusStore object inside your App's OnCreate method.</li>
<ul></ul>
<li>Add products to the store using <a href="#AddProducts(String[],Int)">AddProducts</a>. </li>
<ul></ul>
<li>Open the store using <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a>.</li>
<ul></ul>
<li>Once the store is sucessfully open, buy products using <a href="#BuyProductAsync(Product,IOnBuyProductComplete)">BuyProductAsync</a>.</li>
<ul></ul>
<li>You can also enquire about products once the store is open using <a href="#GetProduct(String)">GetProduct</a> or <a href="#GetProducts()">GetProducts</a>.</li>
<ul></ul>
</ul>
<p>
Notes:
</p>
<ul>
<li>It is up to your app to keep track of purchased products, for example, in a file stored in cerberus://internal/.</li>
<ul></ul>
<li>If your app uses non-consumables, it can use <a href="#GetOwnedProductsAsync(IOnGetOwnedProductsComplete)">GetOwnedProductsAsync</a> to retreive a list of previously purchased non-consumables. This is for situations where the user may have reinstalled the app, or installed it on a different device. Note that on iOS, <a href="#GetOwnedProductsAsync(IOnGetOwnedProductsComplete)">GetOwnedProductsAsync</a> will cause an app store 'login' dialog to appear so it should only be used in response to a user interaction (eg: via clicking on a 'Restore Purchases' button). </li>
<ul></ul>
<li>iOS apps that use non-consumables must provide a 'Restore Purchases' button or equivalent that restores previously purchased non-consumables, or they will fail app store requirements.</li>
<ul></ul>
</ul>
<p>
For more information on setting up your app for IAP, see <a href="Target SDKs_The Android target.html">The Android target</a>, <a href="Target SDKs_The iOS target.html">The iOS target</a> and <a href="Target SDKs_The WinRT target.html">The WinRT target</a> pages in the target SDKS reference.
</p>
<p>
There's a bananas/mak/iaptest demo in the release, but it wont work 'as-is' - you'll need to add a keystore file for android; change the BundleID for ios; change the Product ID for winrt, and change the CONSUMABLES and NON_CONSUMABLES arrays to match your product ids.
</p>
		
		
	</section>
	<hr>









	<section>
		<h2>Methods Documentation</h2>
		
			<article>
				<a name="AddProducts(String[],Int)"></a>
				<pre class="declaration">Method <strong>AddProducts</strong> : <a href="Programming_Keywords_Void.html">Void</a> ( ids:<a href="Modules_cerberus.lang_String.html">String</a>[], type:<a href="Programming_Keywords_Int.html">Int</a> )</pre>
				<p>
Adds multiple new products to the store.
</p>
<p>
Each element of <b>ids</b> is the Android or iOS 'product id' of the product to add.
</p>
<p>
<b>type</b> is the product type - consumable or non-consumable.
</p>
<p>
On iOS, you must ensure that <b>type</b> matches the product type selected in iTunes Connect, otherwise the results will be unpredictable!
</p>
<p>
On Android, the product type selected in the GooglePlay Developer Console must be 'managed' (CerberusStore emulates consumable products on Android).
</p>
<p>
This method may only be called before <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a>.
</p>
<p>
<b>type</b> must be one of:
</p>
<table>
<tr><th>Type</th><th>Description</th></tr>
<tr><td>1</td><td>Consumable product</td></tr>
<tr><td>2</td><td>Non-consumable product</td></tr>
</table>
				
				
				
				
			</article>
		
			<article>
				<a name="BuyProductAsync(Product,IOnBuyProductComplete)"></a>
				<pre class="declaration">Method <strong>BuyProductAsync</strong> : <a href="Programming_Keywords_Void.html">Void</a> ( product:<a href="Modules_brl.cerberusstore_Product.html">Product</a>, onComplete:<a href="Modules_brl.cerberusstore_IOnBuyProductComplete.html">IOnBuyProductComplete</a> )</pre>
				<p>
Starts an async operation to buy a product.
</p>
<p>
When the operation completes, the OnBuyProductComplete method of the <b>onComplete</b> object is called.
</p>
<p>
Note that it is possible to buy the same non-consumable product multiple times, although the user will only be charged for the first purchase. It is up to your app to keep track of purchases and ensure the user is not presented with the option of repurchasing a non-consumable product.
</p>
<p>
This method may only be called after <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a> successfully completes.
</p>
				
				
				
				
			</article>
		
			<article>
				<a name="GetOwnedProductsAsync(IOnGetOwnedProductsComplete)"></a>
				<pre class="declaration">Method <strong>GetOwnedProductsAsync</strong> : <a href="Programming_Keywords_Void.html">Void</a> ( onComplete:<a href="Modules_brl.cerberusstore_IOnGetOwnedProductsComplete.html">IOnGetOwnedProductsComplete</a> )</pre>
				<p>
Starts an async operation to get an array of all non-consumable products owned by the user.
</p>
<p>
When the operation completes, the OnGetOwnedProductsComplete method of the <b>onComplete</b> object is called.
</p>
<p>
This method may only be called after <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a> successfully completes.
</p>
<p>
On iOS, this method may cause an app store 'login' dialog to appear.
</p>
				
				
				
				
			</article>
		
			<article>
				<a name="GetProduct(String)"></a>
				<pre class="declaration">Method <strong>GetProduct</strong> : <a href="Modules_brl.cerberusstore_Product.html">Product</a> ( id:<a href="Modules_cerberus.lang_String.html">String</a> )</pre>
				<p>
Gets the product corresponding to <b>id</b>, the iTunes connect or GooglePlay product identifier.
</p>
<p>
This method may only be called after <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a> successfully completes.
</p>
				
				
				
				
			</article>
		
			<article>
				<a name="GetProducts()"></a>
				<pre class="declaration">Method <strong>GetProducts</strong> : <a href="Modules_brl.cerberusstore_Product.html">Product</a>[] ()</pre>
				<p>
Gets all products.
</p>
<p>
This method may only be called after <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a> successfully completes.
</p>
				
				
				
				
			</article>
		
			<article>
				<a name="GetProducts(Int)"></a>
				<pre class="declaration">Method <strong>GetProducts</strong> : <a href="Modules_brl.cerberusstore_Product.html">Product</a>[] ( type:<a href="Programming_Keywords_Int.html">Int</a> )</pre>
				<p>
Gets all products of the given type.
</p>
<p>
This method may only be called after <a href="#OpenStoreAsync(IOnOpenStoreComplete)">OpenStoreAsync</a> successfully completes.
</p>
<p>
<b>type</b> must be one of:
</p>
<table>
<tr><th>Type</th><th>Description</th></tr>
<tr><td>1</td><td>Consumable product</td></tr>
<tr><td>2</td><td>Non-consumable product</td></tr>
</table>
				
				
				
				
			</article>
		
			<article>
				<a name="OpenStoreAsync(IOnOpenStoreComplete)"></a>
				<pre class="declaration">Method <strong>OpenStoreAsync</strong> : <a href="Programming_Keywords_Void.html">Void</a> ( onComplete:<a href="Modules_brl.cerberusstore_IOnOpenStoreComplete.html">IOnOpenStoreComplete</a> )</pre>
				<p>
Starts an async operation to open the store.
</p>
<p>
When the operation completes, the OnOpenStoreComplete method of the <b>onComplete</b> object is called.
</p>
				
				
				
				
			</article>
		
	</section>
	<hr>




		</main>
	</div>
</body>
</html>