<!doctype html>
<html lang="en-US">
<head>
	<meta charset="UTF-8" />
	<title>Cerberus X Documentation</title>
	<link rel="stylesheet" type="text/css" href="pagestyle.css" />
</head>
<body>
	<div class="page">
		<header>
			<h1>
				<a href="Home.html"><img src="data/cerberusx.png"/></a>Cerberus X Documentation
			</h1>

		</header>

		<nav class="main">
			<a href="Home.html">Home</a>
			<a href="API Reference.html">API Reference</a>
			<a href="Programming_Language reference.html">Language Reference</a>
			<a href="Modules.html">Modules</a>
			<a href="Indexes.html">Indexes</a>
		</nav>
		
		<nav class="location">
			<a href='Home.html'>Home</a>

			<a href='Modules.html'>Modules</a>

			<a href='Modules_brl.pool.html'>brl.pool</a>

			<span>Pool</span>

		</nav>

		<main>


<h1>Class <small>Pool&lt;T&gt;</small></h1>


	<p>
		A pool object allows you to manually allocate and free objects from a memory pool.<a href="#description"> More...</a>
	</p>


<h2>Declarations</h2>















	<table class="index">
		<tr><th>Constructors</th><th></th></tr>
		
			<tr>
				<td><code><a href="#New([Int])">New</a><small> ( initialCapacity:Int=10 )</small></code></td>
				<td>Creates a pool containing <b>initialCapacity</b> objects.</td>
			</tr>
		
	</table>


	<table class="index">
		<tr><th>Methods</th><th></th></tr>
		
			<tr>
				<td><code><a href="#Allocate()">Allocate</a><small> : T ()</small></code></td>
				<td>Allocates an object from the pool and calls <a href="Modules_brl.pool_IOnPoolAllocate.html#OnPoolAllocate()">IOnPoolAllocate.OnPoolAllocate</a> if the object implements <a href="Modules_brl.pool_IOnPoolAllocate.html">IOnPoolAllocate</a>.</td>
			</tr>
		
			<tr>
				<td><code><a href="#Free(T)">Free</a><small> : Void ( t:T )</small></code></td>
				<td>Adds an object to the pool and calls <a href="Modules_brl.pool_IOnPoolFree.html#OnPoolFree()">IOnPoolFree.OnPoolFree</a> if the object implements <a href="Modules_brl.pool_IOnPoolFree.html">IOnPoolFree</a>.</td>
			</tr>
		
	</table>












	<section>
		<a name="description"></a>
		<h2>Detailed Discussion</h2>
		<p>
A pool object allows you to manually allocate and free objects from a memory pool.
</p>
<p>
A pool can be used instead of <a href="Programming_Keywords_New.html">New</a> in situations where you want to minimize garbage collection.
</p>
		
		
			<span class="detail example"><b><a href="examples/brl_pool_Pool.cxs">Example</a></b></span>
			<div class="pretty">
<code class="k">Import </code><code class="i">brl</code><code class="d">.</code><code class="i">pool</code><br/>
<br/>
<code class="k">Class </code><code class="i">Actor</code><br/>
<br/>
<code class="d">	</code><code class="k">Function </code><code class="i">Create</code><code class="d">:</code><code class="i">Actor</code><code class="d">( </code><code class="i">x</code><code class="d">:</code><code class="k">Float</code><code class="d">,</code><code class="i">y</code><code class="d">:</code><code class="k">Float </code><code class="d">)</code><br/>
<code class="d">		</code><code class="k">Return </code><code class="i">_pool</code><code class="d">.</code><code class="i">Allocate</code><code class="d">().</code><code class="i">Init</code><code class="d">( </code><code class="i">x</code><code class="d">,</code><code class="i">y </code><code class="d">)</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Method </code><code class="i">Destroy</code><code class="d">:</code><code class="k">Void</code><code class="d">()</code><br/>
<code class="d">		</code><code class="i">_pool</code><code class="d">.</code><code class="i">Free</code><code class="d">( </code><code class="k">Self </code><code class="d">)</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Method </code><code class="i">IsDead</code><code class="d">:</code><code class="k">Bool</code><code class="d">()</code><br/>
<code class="d">		</code><code class="k">Return </code><code class="i">_t</code><code class="d">=</code><code class="l">0		</code><code class="r">'timeout?</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Method </code><code class="i">Update</code><code class="d">:</code><code class="k">Void</code><code class="d">()</code><br/>
<code class="d">		</code><code class="k">If </code><code class="i">_t</code><code class="d">&gt;</code><code class="l">0 </code><code class="i">_t</code><code class="d">-=</code><code class="l">1	</code><code class="r">'update timeout</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Private</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Field </code><code class="i">_x</code><code class="d">:</code><code class="k">Float</code><br/>
<code class="d">	</code><code class="k">Field </code><code class="i">_y</code><code class="d">:</code><code class="k">Float</code><br/>
<code class="d">	</code><code class="k">Field </code><code class="i">_t</code><code class="d">:</code><code class="k">Int</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Global </code><code class="i">_pool</code><code class="d">:=</code><code class="k">New </code><code class="i">Pool</code><code class="d">&lt;</code><code class="i">Actor</code><code class="d">&gt;( </code><code class="l">1000 </code><code class="d">)</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">Method </code><code class="i">Init</code><code class="d">:</code><code class="i">Actor</code><code class="d">( </code><code class="i">x</code><code class="d">:</code><code class="k">Float</code><code class="d">,</code><code class="i">y</code><code class="d">:</code><code class="k">Float </code><code class="d">)</code><br/>
<code class="d">		</code><code class="i">_x</code><code class="d">=</code><code class="i">x</code><br/>
<code class="d">		</code><code class="i">_y</code><code class="d">=</code><code class="i">y</code><br/>
<code class="d">		</code><code class="i">_t</code><code class="d">=</code><code class="i">Rnd</code><code class="d">(</code><code class="l">20</code><code class="d">,</code><code class="l">100</code><code class="d">)	</code><code class="r">'random timeout</code><br/>
<code class="d">		</code><code class="k">Return Self</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="k">End</code><br/>
<br/>
<code class="k">Function </code><code class="i">UpdateActors</code><code class="d">:</code><code class="k">Void</code><code class="d">( </code><code class="i">actors</code><code class="d">:</code><code class="i">Stack</code><code class="d">&lt;</code><code class="i">Actor</code><code class="d">&gt; )</code><br/>
<br/>
<code class="d">	</code><code class="r">'Update all actors</code><br/>
<code class="d">	</code><code class="k">For Local </code><code class="i">i</code><code class="d">:=</code><code class="l">0 </code><code class="k">Until </code><code class="i">actors</code><code class="d">.</code><code class="i">Length</code><br/>
<code class="d">		</code><code class="i">actors</code><code class="d">.</code><code class="i">Get</code><code class="d">(</code><code class="i">i</code><code class="d">).</code><code class="i">Update</code><code class="d">()</code><br/>
<code class="d">	</code><code class="k">Next</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="r">'Flush dead actors, compacting stack as we go...</code><br/>
<code class="d">	</code><code class="k">Local </code><code class="i">alive</code><code class="d">:=</code><code class="l">0</code><br/>
<code class="d">	</code><code class="k">For Local </code><code class="i">i</code><code class="d">:=</code><code class="l">0 </code><code class="k">Until </code><code class="i">actors</code><code class="d">.</code><code class="i">Length</code><br/>
<code class="d">		</code><code class="k">Local </code><code class="i">actor</code><code class="d">:=</code><code class="i">actors</code><code class="d">.</code><code class="i">Get</code><code class="d">( </code><code class="i">i </code><code class="d">)</code><br/>
<code class="d">		</code><br/>
<code class="d">		</code><code class="k">If </code><code class="i">actor</code><code class="d">.</code><code class="i">IsDead</code><code class="d">() </code><br/>
<code class="d">			</code><code class="i">Print </code><code class="l">"Dead!"</code><br/>
<code class="d">			</code><code class="i">actor</code><code class="d">.</code><code class="i">Destroy</code><code class="d">()</code><br/>
<code class="d">			</code><code class="k">Continue</code><br/>
<code class="d">		</code><code class="k">Endif</code><br/>
<code class="d">		</code><br/>
<code class="d">		</code><code class="i">actors</code><code class="d">.</code><code class="i">Set alive</code><code class="d">,</code><code class="i">actor</code><br/>
<code class="d">		</code><code class="i">alive</code><code class="d">+=</code><code class="l">1</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="i">actors</code><code class="d">.</code><code class="i">Length</code><code class="d">=</code><code class="i">alive		</code><code class="r">'v70 only...</code><br/>
<br/>
<code class="k">End</code><br/>
<br/>
<code class="k">Function </code><code class="i">Main</code><code class="d">()</code><br/>
<br/>
<code class="d">	</code><code class="k">Local </code><code class="i">actors</code><code class="d">:=</code><code class="k">New </code><code class="i">Stack</code><code class="d">&lt;</code><code class="i">Actor</code><code class="d">&gt;</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">For Local </code><code class="i">i</code><code class="d">:=</code><code class="l">0 </code><code class="k">Until </code><code class="l">100</code><br/>
<code class="d">		</code><code class="i">actors</code><code class="d">.</code><code class="i">Push Actor</code><code class="d">.</code><code class="i">Create</code><code class="d">( </code><code class="i">Rnd</code><code class="d">(</code><code class="l">100</code><code class="d">),</code><code class="i">Rnd</code><code class="d">(</code><code class="l">100</code><code class="d">) )</code><br/>
<code class="d">	</code><code class="k">End</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="k">While </code><code class="i">actors</code><code class="d">.</code><code class="i">Length</code><br/>
<code class="d">		</code><code class="i">UpdateActors actors</code><br/>
<code class="d">	</code><code class="k">Wend</code><br/>
<code class="d">	</code><br/>
<code class="d">	</code><code class="i">Print </code><code class="l">"Done!"</code><br/>
<br/>
<code class="k">End</code><br/>
</div>
		
	</section>
	<hr>








	<section>
		<h2>Constructors Documentation</h2>
		
			<article>
				<a name="New([Int])"></a>
				<pre class="declaration">Method <strong>New</strong> ( initialCapacity:<a href="Programming_Keywords_Int.html">Int</a>=10 )</pre>
				<p>
Creates a pool containing <b>initialCapacity</b> objects.
</p>
				
				
				
				
			</article>
		
	</section>
	<hr>


	<section>
		<h2>Methods Documentation</h2>
		
			<article>
				<a name="Allocate()"></a>
				<pre class="declaration">Method <strong>Allocate</strong> : T ()</pre>
				<p>
Allocates an object from the pool and calls <a href="Modules_brl.pool_IOnPoolAllocate.html#OnPoolAllocate()">IOnPoolAllocate.OnPoolAllocate</a> if the object implements <a href="Modules_brl.pool_IOnPoolAllocate.html">IOnPoolAllocate</a>.
</p>
<p>
If the pool is empty, an object created using <a href="Programming_Keywords_New.html">New</a> is returned instead.
</p>
				
				
				
				
			</article>
		
			<article>
				<a name="Free(T)"></a>
				<pre class="declaration">Method <strong>Free</strong> : <a href="Programming_Keywords_Void.html">Void</a> ( t:T )</pre>
				<p>
Adds an object to the pool and calls <a href="Modules_brl.pool_IOnPoolFree.html#OnPoolFree()">IOnPoolFree.OnPoolFree</a> if the object implements <a href="Modules_brl.pool_IOnPoolFree.html">IOnPoolFree</a>. This object is then available for future use by <a href="#Allocate()">Allocate</a>.
</p>
				
				
				
				
			</article>
		
	</section>
	<hr>




		</main>
	</div>
</body>
</html>